<html>
<head>
	<link href="./styles/computer.css" rel="stylesheet" type="text/css">
	<script src="./javascript/jquery-1.6.1.js"></script>
	<script src="./javascript/jquery.rightClick.js"></script>
</head>
<body>
<script language="JavaScript">
	var resources = "./images/";
	
	/* The Puzzle Object */
	var puzzle = {
		height : 3, // the height of the puzzle
		width : 6, // the width of the puzzle
		row : Array(), // generate an array of rows
		solvable : Array(), // generate an array filled with all puzzle.row[1 -> puzzle.height].columns[1 -> puzzle.height].solvable.bool
		solved : Array() // generate an array filled with all puzzle.row[1 -> puzzle.height].columns[1 -> puzzle.height].solved.bool
	};
	document.write('<div class="board">');
	document.write('<span id="score">0</span>');
	for (var rowNumber = 1; rowNumber <= puzzle.height; rowNumber++) { // for all rows
		puzzle.row[rowNumber] = {
			column : Array(), // generate an array of columns
			answer : Array() // generate an array of answers
		};
		document.write('<div class="row">');
		for (var columnNumber = 1; columnNumber <= puzzle.width; columnNumber++) { // for all columns
			// create answers
			var randomAnswer = Math.floor(Math.random() * puzzle.width); // generate a random answer to be used for the column
			if (puzzle.row[rowNumber].answer.indexOf(randomAnswer) != -1) { // if the answer has already been used by another column in the row...
				while (puzzle.row[rowNumber].answer.indexOf(randomAnswer) != -1) { // continue generating random answers until an unused answer is generated
					randomAnswer = Math.floor(Math.random() * puzzle.width);
				};
			};
			// then...
			puzzle.row[rowNumber].column[columnNumber] = {
				solvable : { // set all columns as unsolvable
					string : 'unsolvable', // set the string of the column as unsolvable
					bool : false // set the boolean value of an unsolvable column as false
				},
				solved : { // set all columns as unsolved
					string : 'unsolved', // set the string of the column as unsolved
					bool : false // set the boolean value of an unsolved column as false
				},
				answer : randomAnswer, // placeholder for the column answer
				tile : Array() // then generate an array of tiles
			};
			puzzle.row[rowNumber].answer[columnNumber] = puzzle.row[rowNumber].column[columnNumber].answer; // set all array elements in puzzle.answer to match puzzle.row[1 -> puzzle.height].columns[1 -> puzzle.height].solvable.bool
			puzzle.solvable[((rowNumber - 1) * puzzle.width) + columnNumber] = puzzle.row[rowNumber].column[columnNumber].solvable.bool; // set all array elements in puzzle.solvable to match puzzle.row[1 -> puzzle.height].columns[1 -> puzzle.height].solvable.bool 
			puzzle.solved[((rowNumber - 1) * puzzle.width) + columnNumber] = puzzle.row[rowNumber].column[columnNumber].solved.bool; // set all array elements in puzzle.solved to match puzzle.row[1 -> puzzle.height].columns[1 -> puzzle.height].solved.bool
			document.write('<div class="column">');
			document.write('<div class="padding">');
			for (var tileNumber = 1; tileNumber <= puzzle.width; tileNumber++) { // for all tiles
				puzzle.row[rowNumber].column[columnNumber].tile[tileNumber] = {
					flag : { // set all tiles as unflagged
						string : 'unflagged', // set the string of the tile as unflagged
						bool : false // set the boolean value of an unflagged tile as false
					},
					possible : { // set all tiles as possible
						string : 'possible', // set the string of the tile as possible
						bool : true // set the boolean value of a possible tile as true
					},
					answer : { // set all tiles as incorrect
						string : 'incorrect', // set the string of the tile as incorrect
						bool : false // set the boolean value of an incorrect tile as false
					}
				};
				if (puzzle.row[rowNumber].column[columnNumber].answer == tileNumber) { // if this tile is the answer for the column
					puzzle.row[rowNumber].column[columnNumber].tile[tileNumber].string = 'correct'; // set the string of the tile as correct
					puzzle.row[rowNumber].column[columnNumber].tile[tileNumber].bool = 'true'; // set the boolean value of a correct tile as true
				};
				document.write('<div id="' + rowNumber + columnNumber + tileNumber + '" style="background-image:url(' + resources + 'row' + rowNumber + '/' + tileNumber + '.jpg);" class="' + puzzle.row[rowNumber].column[columnNumber].tile[tileNumber].flag.string + '"></div>');
				$("#" + rowNumber + columnNumber + tileNumber).click(function(x, y, z) {
					return function() {
						userInput(x, y, z);
					};
				}(rowNumber, columnNumber, tileNumber));
				$("#" + rowNumber + columnNumber + tileNumber).rightClick( function(e) {
					if (this.hasClass("flagged") == true) {
						$(this).removeClass("flagged");
						row[rowNumber].column[columnNumber].tile[tileNumber].flag.string = 'unflagged';
						row[rowNumber].column[columnNumber].tile[tileNumber].flag.bool = false;
					}
					else if (this.hasClass("unflagged") == true && this.hasClass("correct") == false) {
						$(this).addClass("flagged");
						row[rowNumber].column[columnNumber].tile[tileNumber].flag.string = 'flagged';
						row[rowNumber].column[columnNumber].tile[tileNumber].flag.bool = true;
					};
				});
			};
			document.write('</div>');
			document.write('</div>');
		};
		document.write('</div>');
	};
	document.write('</div>');
	document.write('<div class="horizontalClueArea"></div>');
	document.write('<div class="verticalClueArea"></div>');
</script>
</body>
</html>